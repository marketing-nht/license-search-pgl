<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PGL Procedure Lookup v3.1 (Full 13 Products)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body { font-family: 'Inter', sans-serif; background-color: #f1f5f9; }
    .animate-fadeIn { animation: fadeIn 0.4s ease-out forwards; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    
    /* Toggle Switch Style */
    .toggle-checkbox:checked { right: 0; border-color: #2563eb; }
    .toggle-checkbox:checked + .toggle-label { background-color: #2563eb; }
    
    /* Custom Scrollbar */
    ::-webkit-scrollbar { width: 6px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { background: #94a3b8; border-radius: 3px; }

    /* Vertical Timeline Line */
    .timeline-line::before { content: ''; position: absolute; top: 0; bottom: 0; left: 16px; width: 2px; background: #e2e8f0; z-index: 0; }
  </style>
  <script type="importmap">
  {
    "imports": {
      "react": "https://esm.sh/react@18.2.0",
      "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
      "lucide-react": "https://esm.sh/lucide-react@0.294.0",
      "htm": "https://esm.sh/htm@3.1.1"
    }
  }
  </script>
</head>
<body>
  <div id="root"></div>

  <script type="module">
    import React, { useState, useMemo } from 'react';
    import ReactDOM from 'react-dom/client';
    import { 
      Search, FileText, Globe, Factory, ShieldCheck, 
      Zap, Wifi, Battery, AlertTriangle, BookOpen, Layers,
      ChevronDown, ChevronUp, Box, Monitor, Tv, Server, Phone
    } from 'lucide-react';
    import htm from 'htm';
    const html = htm.bind(React.createElement);

    // ==========================================
    // DỮ LIỆU THỦ TỤC & TÍNH NĂNG CHI TIẾT (13 SẢN PHẨM)
    // ==========================================
    const PROCEDURES = [
      // 1. LAPTOP
      {
        id: "laptop",
        name: "1. Máy tính xách tay (Laptop)",
        group: "CNTT (MIC) & Năng lượng",
        icon: Globe,
        features: [
          { name: "An toàn điện", reg: "QCVN 132:2022/BTTTT", desc: "Bắt buộc thử nghiệm" },
          { name: "EMC", reg: "QCVN 118:2018/BTTTT", desc: "Tương thích điện từ" },
          { name: "Wifi/Bluetooth", reg: "QCVN 54, 65", desc: "Nếu có tích hợp" },
          { name: "Pin Lithium", reg: "QCVN 101:2020", desc: "Thử an toàn Pin" },
          { name: "Hiệu suất NL", reg: "TCVN 11848:2021", desc: "Dán nhãn năng lượng" }
        ],
        import_steps: [
          "B1: Đăng ký Kiểm tra chất lượng (PQ) trên Cổng 1 cửa (VNSW).",
          "B2: Thử nghiệm toàn diện tại PGL.",
          "B3: Chứng nhận Hợp quy (Cục Viễn thông).",
          "B4: Hoàn tất hồ sơ PQ trên VNSW.",
          "B5: Đăng ký dán nhãn năng lượng (Bộ Công Thương) -> Dán tem."
        ],
        domestic_steps: ["B1: Thử nghiệm mẫu.", "B2: Chứng nhận Hợp quy.", "B3: Công bố Hợp quy.", "B4: Dán nhãn năng lượng."]
      },
      // 2. TABLET
      {
        id: "tablet",
        name: "2. Máy tính bảng (Tablet)",
        group: "CNTT & Viễn thông",
        icon: Box,
        features: [
          { name: "An toàn điện", reg: "QCVN 132:2022", desc: "Bắt buộc" },
          { name: "Wifi/4G/5G", reg: "QCVN 54, 65, 117", desc: "RF Test" },
          { name: "SAR (Hấp thụ)", reg: "QCVN 134:2024", desc: "Đo SAR Body" },
          { name: "Hiệu suất NL", reg: "TCVN 11848:2021", desc: "Dán nhãn năng lượng" }
        ],
        import_steps: [
          "B1: Đăng ký KTCL trên VNSW.",
          "B2: Thử nghiệm mẫu tại PGL.",
          "B3: Chứng nhận Hợp quy (RF, SAR).",
          "B4: Tự đánh giá sự phù hợp (Safety, EMC).",
          "B5: Thông quan & Dán nhãn."
        ],
        domestic_steps: ["B1: Thử nghiệm.", "B2: Chứng nhận & Công bố Hợp quy.", "B3: Dán tem."]
      },
      // 3. DESKTOP
      {
        id: "desktop",
        name: "3. Máy tính để bàn (Desktop)",
        group: "CNTT & Năng lượng",
        icon: Monitor,
        features: [
          { name: "Hiệu suất NL", reg: "TCVN 13371:2021", desc: "Dán nhãn năng lượng" },
          { name: "EMC", reg: "QCVN 118:2018", desc: "Tự công bố hợp quy" },
          { name: "Wifi (Nếu có)", reg: "QCVN 54, 65", desc: "Nếu có card wifi" }
        ],
        import_steps: [
          "B1: Thử nghiệm HSNL & EMC tại PGL.",
          "B2: Công bố dán nhãn năng lượng (Bộ Công Thương).",
          "B3: Tự công bố hợp quy EMC (Sở TTTT)."
        ],
        domestic_steps: ["B1: Thử nghiệm.", "B2: Công bố dán nhãn & Hợp quy."]
      },
      // 4. MOBILE PHONE
      {
        id: "mobile",
        name: "4. Điện thoại di động",
        group: "Viễn thông (MIC)",
        icon: Phone,
        features: [
          { name: "RF (2G/3G/4G/5G)", reg: "QCVN 117, 127", desc: "Tắt sóng 2G Only" },
          { name: "Wifi/BT", reg: "QCVN 54, 65", desc: "Kết nối không dây" },
          { name: "SAR", reg: "QCVN 134:2024", desc: "Đo an toàn bức xạ" },
          { name: "Pin Lithium", reg: "QCVN 101:2020", desc: "An toàn pin" }
        ],
        import_steps: [
          "B1: Đăng ký KTCL (Cục Viễn thông).",
          "B2: Đo kiểm tại PGL.",
          "B3: Chứng nhận Hợp quy.",
          "B4: Công bố & Dán tem ICT."
        ],
        domestic_steps: ["B1: Đo kiểm.", "B2: Chứng nhận.", "B3: Công bố."]
      },
      // 5. TIVI
      {
        id: "tv",
        name: "5. Ti vi (Television)",
        group: "Gia dụng & Viễn thông",
        icon: Tv,
        features: [
          { name: "Hiệu suất NL", reg: "TCVN 9536:2021", desc: "Dán nhãn năng lượng" },
          { name: "DVB-T2", reg: "QCVN 63:2012", desc: "Đầu thu số tích hợp" },
          { name: "Wifi/BT", reg: "QCVN 54, 65", desc: "Smart TV" },
          { name: "EMC", reg: "QCVN 118:2018", desc: "Nếu có cổng LAN/Wifi" }
        ],
        import_steps: [
          "B1: Đăng ký KTCL (Cho phần DVB-T2/Wifi).",
          "B2: Thử nghiệm HSNL & RF.",
          "B3: Chứng nhận & Công bố Hợp quy.",
          "B4: Dán nhãn năng lượng."
        ],
        domestic_steps: ["B1: Thử nghiệm.", "B2: Chứng nhận & Công bố."]
      },
      // 6. SET TOP BOX
      {
        id: "stb",
        name: "6. Đầu thu (Set Top Box)",
        group: "Viễn thông (MIC)",
        icon: Server,
        features: [
          { name: "DVB-T2", reg: "QCVN 63:2012", desc: "Thu truyền hình số" },
          { name: "EMC", reg: "QCVN 118:2018", desc: "Tương thích điện từ" },
          { name: "An toàn điện", reg: "QCVN 132:2022", desc: "Bắt buộc" }
        ],
        import_steps: [
          "B1: Đăng ký KTCL trên VNSW.",
          "B2: Thử nghiệm tại PGL.",
          "B3: Công bố Hợp quy.",
          "B4: Dán tem ICT."
        ],
        domestic_steps: ["B1: Thử nghiệm.", "B2: Công bố Hợp quy."]
      },
      // 7. MODEM WIFI
      {
        id: "wifi-router",
        name: "7. Modem / Wifi Router",
        group: "Viễn thông (MIC)",
        icon: Wifi,
        features: [
          { name: "Wifi 2.4G/5G", reg: "QCVN 54, 65", desc: "RF Test" },
          { name: "EMC", reg: "QCVN 112:2017", desc: "EMC thiết bị vô tuyến" }
        ],
        import_steps: [
          "B1: Đăng ký KTCL.",
          "B2: Thử nghiệm & Chứng nhận Hợp quy.",
          "B3: Công bố Hợp quy."
        ],
        domestic_steps: ["B1: Thử nghiệm.", "B2: Chứng nhận & Công bố."]
      },
      // 8. DECT PHONE
      {
        id: "dect",
        name: "8. Điện thoại DECT",
        group: "Viễn thông (MIC)",
        icon: Phone,
        features: [
          { name: "RF DECT", reg: "QCVN 22:2010", desc: "Tần số vô tuyến" },
          { name: "EMC", reg: "QCVN 18:2014", desc: "Tương thích điện từ" },
          { name: "An toàn", reg: "QCVN 132:2022", desc: "An toàn điện" }
        ],
        import_steps: [
          "B1: Đăng ký KTCL.",
          "B2: Chứng nhận Hợp quy.",
          "B3: Công bố & Dán tem."
        ],
        domestic_steps: ["B1: Thử nghiệm.", "B2: Chứng nhận."]
      },
      // 9. ĐIỀU HÒA
      {
        id: "ac",
        name: "9. Điều hòa không khí",
        group: "Gia dụng (MOST) & Năng lượng",
        icon: Zap,
        features: [
          { name: "EMC", reg: "QCVN 9:2012/BKHCN", desc: "Chứng nhận CR" },
          { name: "Hiệu suất NL", reg: "TCVN 7830:2021", desc: "Dán nhãn năng lượng" },
          { name: "An toàn (LVD)", reg: "TCVN 5699-2-40", desc: "Thử nghiệm an toàn" }
        ],
        import_steps: [
          "B1: Đăng ký Kiểm tra chất lượng (Sở KHCN).",
          "B2: Thử nghiệm EMC & HSNL tại PGL.",
          "B3: Chứng nhận Hợp quy (Lô hàng) & Kết quả HSNL.",
          "B4: Thông quan & Dán tem."
        ],
        domestic_steps: ["B1: Thử nghiệm.", "B2: Chứng nhận Hợp quy (3 năm).", "B3: Công bố.", "B4: Dán tem."]
      },
      // 10. TỦ LẠNH
      {
        id: "fridge",
        name: "10. Tủ lạnh",
        group: "Gia dụng & Năng lượng",
        icon: Box,
        features: [
          { name: "EMC", reg: "QCVN 9:2012/BKHCN", desc: "Chứng nhận CR" },
          { name: "Hiệu suất NL", reg: "TCVN 7828:2016", desc: "Dán nhãn năng lượng" },
          { name: "An toàn", reg: "TCVN 5699-2-24", desc: "IEC 60335-2-24" }
        ],
        import_steps: [
          "B1: Đăng ký KTCL.",
          "B2: Thử nghiệm EMC & HSNL.",
          "B3: Chứng nhận Hợp quy.",
          "B4: Dán tem CR & Năng lượng."
        ],
        domestic_steps: ["B1: Thử nghiệm.", "B2: Chứng nhận 3 năm.", "B3: Dán tem."]
      },
      // 11. BẾP ĐIỆN
      {
        id: "stove",
        name: "11. Bếp điện (Từ/Hồng ngoại)",
        group: "Gia dụng & Năng lượng",
        icon: Zap,
        features: [
          { name: "EMC", reg: "QCVN 9:2012/BKHCN", desc: "Chứng nhận CR" },
          { name: "An toàn", reg: "TCVN 5699-2-9", desc: "Thử nghiệm LVD" },
          { name: "Hiệu suất NL", reg: "TCVN 13372/13373", desc: "Dán nhãn năng lượng" }
        ],
        import_steps: [
          "B1: Đăng ký KTCL (Sở KHCN).",
          "B2: Thử nghiệm EMC & Safety.",
          "B3: Chứng nhận Hợp quy (Lô hàng).",
          "B4: Công bố HSNL (Bộ Công Thương)."
        ],
        domestic_steps: ["B1: Thử nghiệm.", "B2: Chứng nhận Hợp quy.", "B3: Công bố."]
      },
      // 12. ĐÈN LED
      {
        id: "led",
        name: "12. Đèn LED",
        group: "Gia dụng & Năng lượng",
        icon: Zap,
        features: [
          { name: "An toàn & EMC", reg: "QCVN 19:2019/BKHCN", desc: "Bắt buộc CR" },
          { name: "Hiệu suất NL", reg: "TCVN 11844:2017", desc: "Dán nhãn năng lượng" }
        ],
        import_steps: [
          "B1: Đăng ký KTCL.",
          "B2: Thử nghiệm QCVN 19 & HSNL.",
          "B3: Chứng nhận Hợp quy.",
          "B4: Dán tem CR & Năng lượng."
        ],
        domestic_steps: ["B1: Thử nghiệm.", "B2: Chứng nhận 3 năm.", "B3: Công bố."]
      },
      // 13. LÒ VI SÓNG
      {
        id: "microwave",
        name: "13. Lò vi sóng",
        group: "Gia dụng (MOST)",
        icon: Box,
        features: [
          { name: "An toàn điện", reg: "QCVN 4:2009/BKHCN", desc: "Sửa đổi 1:2016" },
          { name: "EMC", reg: "QCVN 9:2012/BKHCN", desc: "Sửa đổi 1:2018" },
          { name: "Hiệu suất NL", reg: "TCVN 13663:2023", desc: "Dự thảo bắt buộc" }
        ],
        import_steps: [
          "B1: Đăng ký KTCL.",
          "B2: Thử nghiệm An toàn & EMC.",
          "B3: Chứng nhận Hợp quy (Phương thức 7).",
          "B4: Thông quan & Dán tem CR."
        ],
        domestic_steps: ["B1: Thử nghiệm.", "B2: Chứng nhận (Phương thức 5).", "B3: Dán tem."]
      }
    ];

    // COMPONENT: CARD
    const ProcedureCard = ({ item }) => {
      const [isImport, setIsImport] = useState(true);
      const [isOpen, setIsOpen] = useState(false);

      return html`
        <div className="bg-white rounded-2xl border border-slate-200 shadow-sm hover:shadow-md transition-all mb-6 overflow-hidden animate-fadeIn">
          <div className="p-5 flex items-center justify-between cursor-pointer bg-gradient-to-r from-slate-50 to-white" onClick=${() => setIsOpen(!isOpen)}>
            <div className="flex items-center gap-4">
              <div className=${`w-14 h-14 rounded-xl flex items-center justify-center text-white shadow-md ${item.group.includes('CNTT') || item.group.includes('Viễn thông') ? 'bg-blue-600' : 'bg-emerald-600'}`}>
                <${item.icon} size=${28} />
              </div>
              <div>
                <h3 className="text-xl font-bold text-slate-800">${item.name}</h3>
                <span className="text-xs font-semibold text-slate-500 bg-white border border-slate-200 px-2 py-1 rounded-md mt-1 inline-block">
                  ${item.group}
                </span>
              </div>
            </div>
            <button className="text-slate-400 hover:text-blue-600 transition-colors">
              ${isOpen ? html`<${ChevronUp} size=${24} />` : html`<${ChevronDown} size=${24} />`}
            </button>
          </div>

          ${isOpen && html`
            <div className="border-t border-slate-100">
              <div className="p-6 bg-white">
                <h4 className="text-sm font-bold text-slate-700 uppercase tracking-wide mb-4 flex items-center gap-2">
                  <${ShieldCheck} size=${18} className="text-blue-600"/> Tính năng & Quy chuẩn áp dụng
                </h4>
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  ${item.features.map((feat, idx) => html`
                    <div key=${idx} className="flex flex-col p-3 rounded-xl border border-slate-100 bg-slate-50 hover:border-blue-200 hover:bg-blue-50 transition-colors">
                      <div className="flex justify-between items-start mb-1">
                        <span className="font-bold text-slate-800 text-sm">${feat.name}</span>
                        <span className="text-[10px] font-bold bg-white border border-slate-200 text-slate-600 px-2 py-0.5 rounded shadow-sm">
                          ${feat.reg}
                        </span>
                      </div>
                      <p className="text-xs text-slate-500 italic">${feat.desc}</p>
                    </div>
                  `)}
                </div>
              </div>

              <div className="p-6 bg-slate-50 border-t border-slate-200">
                <div className="flex flex-col sm:flex-row justify-between items-center mb-6 gap-4">
                  <h4 className="text-sm font-bold text-slate-700 uppercase tracking-wide flex items-center gap-2">
                    <${Layers} size=${18} className="text-purple-600"/> Quy trình thực hiện
                  </h4>
                  <div className="flex bg-white p-1 rounded-lg border border-slate-200 shadow-sm">
                    <button onClick=${() => setIsImport(true)} className=${`px-4 py-1.5 rounded-md text-sm font-bold transition-all flex items-center gap-2 ${isImport ? 'bg-blue-600 text-white shadow-md' : 'text-slate-500 hover:bg-slate-100'}`}>
                      <${Globe} size=${14} /> Nhập khẩu
                    </button>
                    <button onClick=${() => setIsImport(false)} className=${`px-4 py-1.5 rounded-md text-sm font-bold transition-all flex items-center gap-2 ${!isImport ? 'bg-emerald-600 text-white shadow-md' : 'text-slate-500 hover:bg-slate-100'}`}>
                      <${Factory} size=${14} /> Sản xuất
                    </button>
                  </div>
                </div>

                <div className="relative pl-6 space-y-6 timeline-line">
                  ${(isImport ? item.import_steps : item.domestic_steps).map((step, idx) => html`
                    <div key=${idx} className="relative z-10 animate-fadeIn">
                      <div className=${`absolute -left-[31px] top-1 w-4 h-4 rounded-full border-2 border-white shadow-sm flex items-center justify-center ${isImport ? 'bg-blue-500' : 'bg-emerald-500'}`}>
                        <div className="w-1.5 h-1.5 bg-white rounded-full"></div>
                      </div>
                      <div className="bg-white p-3 rounded-lg border border-slate-200 shadow-sm">
                        <p className="text-sm text-slate-700 leading-relaxed font-medium">
                          <span className=${`font-bold mr-1 ${isImport ? 'text-blue-600' : 'text-emerald-600'}`}>B${idx + 1}:</span> 
                          ${step}
                        </p>
                      </div>
                    </div>
                  `)}
                </div>
              </div>
            </div>
          `}
        </div>
      `;
    };

    const App = () => {
      const [query, setQuery] = useState('');
      
      const filteredData = useMemo(() => {
        if (!query) return PROCEDURES;
        return PROCEDURES.filter(p => 
          p.name.toLowerCase().includes(query.toLowerCase()) || 
          p.features.some(f => f.reg.toLowerCase().includes(query.toLowerCase()))
        );
      }, [query]);

      return html`
        <div className="min-h-screen flex flex-col md:flex-row bg-slate-100">
          <aside className="w-full md:w-80 bg-white border-r border-slate-200 p-6 hidden md:block h-screen sticky top-0 overflow-y-auto">
            <div className="flex items-center gap-3 mb-10">
              <div className="bg-indigo-600 p-3 rounded-xl text-white shadow-xl shadow-indigo-200"><${BookOpen} size=${28} /></div>
              <div><h1 className="font-extrabold text-xl text-slate-900">PGL Guide</h1><p className="text-xs text-slate-500">Tra cứu thủ tục v3.1</p></div>
            </div>
            <div className="space-y-6">
              <div className="bg-blue-50 p-5 rounded-2xl border border-blue-100">
                <h3 className="font-bold text-blue-900 text-sm mb-2"><${Globe} size=${16} className="inline mr-1"/> Hàng Nhập khẩu</h3>
                <p className="text-xs text-blue-700">Đăng ký kiểm tra trên Cổng 1 cửa (VNSW) hoặc Sở KHCN địa phương.</p>
              </div>
              <div className="bg-emerald-50 p-5 rounded-2xl border border-emerald-100">
                <h3 className="font-bold text-emerald-900 text-sm mb-2"><${Factory} size=${16} className="inline mr-1"/> Sản xuất</h3>
                <p className="text-xs text-emerald-700">Đánh giá nhà xưởng (Phương thức 5) và Chứng nhận 3 năm.</p>
              </div>
              <div className="pt-6 border-t border-slate-100">
                <h4 className="text-xs font-bold text-slate-400 uppercase mb-4">Sản phẩm phổ biến</h4>
                <div className="flex flex-wrap gap-2">
                  ${['Laptop', 'Điều hòa', 'Wifi', 'Led', 'Tivi'].map(t => html`<button onClick=${() => setQuery(t)} className="px-3 py-1 bg-slate-100 hover:bg-slate-200 rounded-full text-xs text-slate-600">${t}</button>`)}
                </div>
              </div>
            </div>
          </aside>

          <main className="flex-1 p-4 md:p-10 h-screen overflow-y-auto">
            <div className="max-w-4xl mx-auto">
              <div className="mb-8">
                <h2 className="text-3xl font-black text-slate-900 mb-2">Tra cứu Thủ tục</h2>
                <p className="text-slate-500">Hướng dẫn 13 nhóm sản phẩm theo quy định mới nhất 2026</p>
              </div>
              <div className="relative mb-8 group z-10">
                <${Search} className="absolute left-5 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-indigo-500" size=${22} />
                <input type="text" className="w-full pl-14 pr-6 py-4 bg-white border-2 border-slate-200 rounded-2xl shadow-sm focus:outline-none focus:border-indigo-500 focus:ring-4 focus:ring-indigo-50 transition-all text-lg" placeholder="Tìm sản phẩm..." value=${query} onChange=${e => setQuery(e.target.value)} autoFocus />
              </div>
              <div className="space-y-4">
                ${filteredData.map(item => html`<${ProcedureCard} key=${item.id} item=${item} />`)}
              </div>
            </div>
          </main>
        </div>
      `;
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(html`<${App} />`);
  </script>
</body>
</html>
